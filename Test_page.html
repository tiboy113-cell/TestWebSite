             <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>iOS Wheel Picker - Vanilla JS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html,body { background: #ececec; }
    body { font-family: 'SF Pro Display', Arial, sans-serif; }
    .container { max-width: 400px; margin: 60px auto; padding: 22px 18px; background: #fff; border-radius: 18px; box-shadow: 0 6px 32px #0054A644; }
    .header { background: #555a62; color: #fff; font-size: 2rem; font-weight: 700; letter-spacing: .02em; padding: 24px; border-radius: 18px 18px 0 0; margin: -22px -18px 24px -18px; }
    .picker-label { font-weight: 600; color: #0054A6; margin: 14px 0 14px 1px;}
    .picker-input {
      padding: 14px 16px;
      border-radius: 18px;
      border: 1.5px solid #B0C6E8;
      font-size: 1.2em;
      background: #f4f6f9;
      cursor: pointer;
      text-align: left;
      user-select: none;
    }
    .modal-bg {
      background: rgba(0,0,0,0.24);
      position: fixed; inset: 0; z-index: 99;
    }
    .picker-modal {
      position: fixed;
      left: 50%; top: 50%;
      transform: translate(-50%,-50%);
      z-index: 100;
      background: #fff;
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0,80,165,0.24);
      width: 350px;
      max-width: 98vw;
      padding: 0 0 16px 0;
      display: flex; flex-direction: column; align-items: stretch;
      animation: pickerpop .19s;
    }
    @keyframes pickerpop { 0%{opacity:.0;transform:scale(0.96) translate(-52%,-52%);} 100%{opacity:1;transform:scale(1) translate(-50%,-50%);} }
    .picker-wheel-wrap {
      flex:1 1 auto;
      height: 248px;
      overflow: hidden;
      position: relative;
      margin-top:0;
    }
    .picker-wheel {
      height: 100%;
      overflow-y: scroll;
      overscroll-behavior: contain;
      scroll-behavior: smooth;
    }
    .picker-list {
      margin: 0;
      padding: 0;
      list-style: none;
      min-height: 100%;
    }
    .picker-item {
      height: 48px;
      line-height: 48px;
      font-size: 1.25rem;
      text-align: center;
      cursor: pointer;
      color: #174699;
      border-radius: 10px;
      user-select: none;
      transition: background .16s, color .16s;
      margin: 0 18px;
    }
    .picker-item.selected {
      background: #0054A6;
      color: #fff;
      font-weight: bold;
    }
    .picker-highlight {
      position: absolute;
      left: 0; right: 0;
      top: 100px;
      height: 48px;
      border-radius: 12px;
      pointer-events: none;
      border: 2px solid #0054A6;
      box-sizing: border-box;
      background: rgba(0,84,166, 0.06);
      z-index: 9;
    }
    .picker-actions {
      padding: 18px 28px 0 28px;
      display: flex; justify-content: flex-end; align-items: center;
    }
    .picker-close {
      font-size: 1.09rem;
      background: #555a62;
      color: #fff;
      border: none;
      border-radius: 11px;
      padding: 9px 28px;
      cursor: pointer;
      font-weight: 600;
      margin-left: 4px;
      transition: background .2s;
    }
    .picker-close:hover { background: #003366; }
    @media (max-width:430px) { .picker-modal { width:99vw;} }
  </style>
</head>
<body>
<div class="container">
  <div class="header">Local Grey</div>
  <label class="picker-label">Select your language</label>
  <div id="langPickerInput" class="picker-input" tabindex="0">English</div>
</div>
<div id="modalBg" class="modal-bg" style="display:none"></div>
<script>
const languages = [
  "English", "Mandarin", "Hindi", "Spanish", "French",
  "Arabic", "Bengali", "Russian", "Portuguese", "Urdu",
  "Indonesian", "German", "Japanese", "Swahili", "Marathi",
  "Telugu", "Turkish", "Korean", "Vietnamese", "Italian"
];
let selectedIdx = 0;

const langPickerInput = document.getElementById('langPickerInput');
const modalBg = document.getElementById('modalBg');

function showPicker() {
  modalBg.style.display="block";
  const modal = document.createElement('div');
  modal.className = "picker-modal";
  modal.innerHTML = `
    <div class="picker-wheel-wrap">
      <div class="picker-highlight"></div>
      <div class="picker-wheel">
        <ul class="picker-list">
          ${languages.map((lang, i) =>
            `<li class="picker-item${i===selectedIdx?' selected':''}" tabindex="0" data-idx="${i}">${lang}</li>`
          ).join('')}
        </ul>
      </div>
    </div>
    <div class="picker-actions">
      <button class="picker-close">Close</button>
    </div>
  `;
  document.body.appendChild(modal);

  const list = modal.querySelector('.picker-list');
  const items = modal.querySelectorAll('.picker-item');
  const wheel = modal.querySelector('.picker-wheel');
  // Constants
  const itemHeight = 48;
  const visibleCount = 5; // 2 above,1 selected,2 below

  // Scroll to initial selected
  setTimeout(() => {
    wheel.scrollTop = (selectedIdx)*itemHeight;
    updateHighlight();
  },35);

  // Helper: highlight
  function updateHighlight(focus, snap) {
    let offset = Math.round(wheel.scrollTop / itemHeight);
    if (offset<0) offset=0;
    if (offset>languages.length-1) offset=languages.length-1;
    items.forEach((it,i)=> it.classList.toggle('selected', i===offset));
    if(typeof snap==="undefined"||snap){
      wheel.scrollTo({top: offset*itemHeight, behavior:'smooth'});
    }
    if(typeof focus!=='undefined' && focus) items[offset].focus();
  }

  // Scroll snap logic (like iOS)
  let isTouching = false, lastTouchY = null, lastTouchTime=null, vel=0, momentumFrame=null;
  wheel.addEventListener('touchstart', (e)=>{
    isTouching = true; vel = 0; if(momentumFrame) cancelAnimationFrame(momentumFrame);
    lastTouchY = e.touches[0].clientY; lastTouchTime=Date.now();
  });
  wheel.addEventListener('touchmove', (e)=>{
    let y = e.touches[0].clientY;
    let dy = y - lastTouchY;
    let dt = Date.now()-lastTouchTime;
    vel = dy/dt*16; // Velocity in px/ms normalized to 60Hz
    lastTouchY = y; lastTouchTime=Date.now();
  });
  wheel.addEventListener('touchend', ()=>{
    isTouching = false;
    // Momentum
    let spd = vel*16; // px per frame
    function momentum() {
      if(Math.abs(spd)>2) {
        wheel.scrollTop -= spd;
        spd *= 0.94;
        momentumFrame = requestAnimationFrame(momentum);
        updateHighlight();
      } else {
        // Snap to item
        let idx = Math.round(wheel.scrollTop/itemHeight);
        wheel.scrollTo({top: idx*itemHeight, behavior:'smooth'});
        updateHighlight(true);
      }
    }
    momentum();
  });
  // Mouse wheel: smooth snap
  let wheelTimeout=null;
  wheel.addEventListener('wheel', e=>{
    if(wheelTimeout) clearTimeout(wheelTimeout);
    wheelTimeout = setTimeout(()=>{
      let idx = Math.round(wheel.scrollTop/itemHeight);
      wheel.scrollTo({top: idx*itemHeight, behavior:'smooth'});
      updateHighlight(true);
    },80);
    setTimeout(updateHighlight,18);
  });

  // Keyboard nav
  modal.addEventListener('keydown', (e)=>{
    let idx = Array.from(items).findIndex(it=>it.classList.contains('selected'));
    if(e.key==='ArrowDown'||e.key==='Down'){if(idx<languages.length-1){ idx++; scrollToIdx(idx);} e.preventDefault();}
    else if(e.key==='ArrowUp'||e.key==='Up'){if(idx>0){ idx--; scrollToIdx(idx);} e.preventDefault();}
    else if(e.key==='Enter'||e.key==='" '||e.key===" "){ selectIdx(idx); }
    else if(e.key==='Escape'){closePicker();}
  });

  // Click item selection
  list.addEventListener('click', e=>{
    if(e.target.classList.contains('picker-item')) {
      let idx = Number(e.target.dataset.idx);
      selectIdx(idx);
    }
  });
  // Snap and highlight on scroll
  wheel.addEventListener('scroll', ()=>{
    if(isTouching) return;
    updateHighlight();
  });
  // Snap on scroll end (fallback)
  let lastScroll=-1000;
  wheel.addEventListener('scroll', ()=>{
    lastScroll=Date.now();
    setTimeout(()=>{if(Date.now()-lastScroll>85){updateHighlight(true);}},90);
  });

  // Helper fns
  function scrollToIdx(idx) {
    wheel.scrollTo({top:idx*itemHeight,behavior:'smooth'});
    updateHighlight(true);
  }
  function selectIdx(idx) {
    selectedIdx=idx;
    langPickerInput.textContent=languages[idx];
    closePicker();
  }
  // Close logic
  function closePicker() {
    document.body.removeChild(modal);
    modalBg.style.display="none";
    langPickerInput.focus();
  }
  // Close btn & bg
  modal.querySelector('.picker-close').onclick=closePicker;
  modalBg.onclick=closePicker;
}
langPickerInput.onclick = showPicker;
langPickerInput.onkeydown = (e)=>{ if(e.key==='Enter'||e.key===' ') showPicker(); }
</script>
</body>
</html>
