<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tax Free Issuing Flow – Global Blue Styled Prototype</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
:root {
  --gb-blue: #0a2856;
  --gb-accent: #1868ae;
  --gb-gray: #f7f7f9;
  --gb-step-done: #89aae6;
}
body {
  margin: 0;
  padding: 0;
  font-family: 'Helvetica Neue', Arial, sans-serif;
  background: var(--gb-gray);
  color: #212121;
}
header {
  background: var(--gb-blue);
  color: #fff;
  text-align: center;
  padding: 2rem 1rem 1rem 1rem;
  letter-spacing: 1px;
}
header small { font-size: 0.95em; color: #c2d2e4; }

#progress-steps {
  display: flex;
  justify-content: center;
  align-items: flex-end;
  margin-top: 1.5rem;
  margin-bottom: -0.8rem;
  flex-wrap: wrap;
  font-size: 0.91rem;
}
.progress-step {
  display: flex;
  align-items: center;
  margin: 0 0.2rem;
}
.progress-circle {
  width: 28px;
  height: 28px;
  border-radius: 14px;
  background: #e5e5ec;
  color: #21316d;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  border: 2px solid #e5e5ec;
  transition: background .17s, border-color .17s;
}
.active .progress-circle, .progress-step.active .progress-circle {
  background: var(--gb-blue);
  color: #fff;
  border-color: var(--gb-accent);
}
.done .progress-circle {
  background: var(--gb-step-done);
  color: var(--gb-blue);
  border-color: var(--gb-accent);
}
.progress-label {
  margin-left: 0.25rem;
  white-space: nowrap;
}
.progress-bar {
  width: 22px;
  height: 3px;
  background: #e5e5e5;
  margin: 0 0.1rem;
  border-radius: 1.5px;
}
.progress-step.active ~ .progress-step .progress-bar {
  background: #e5e5e5;
}
.progress-step.done .progress-bar {
  background: var(--gb-step-done);
}

section {
  display: none;
  background: #fff;
  margin: 2rem auto;
  max-width: 480px;
  border-radius: 16px;
  box-shadow: 0 3px 24px rgba(10,40,86,0.10), 0 1.5px 6px rgba(10,40,86,0.05);
  padding: 2rem 2rem 1.5rem;
}
section.active { display: block; }
h2 {
  color: var(--gb-blue);
  margin-bottom: 1rem;
  font-size: 1.22rem;
  font-weight: 700;
}
p { line-height: 1.6; }
.eligibility {
  background: #f1f5f9;
  border-radius: 12px;
  color: #21316d;
  padding: 1rem;
  margin-bottom: 1rem;
  font-size: 0.97rem;
}
.button-row {
  display: flex;
  gap: 1rem;
  margin: 1.5rem 0 0;
  flex-wrap: wrap;
}
.btn {
  background: var(--gb-blue);
  color: #fff;
  border: none;
  border-radius: 22px;
  padding: 0.72rem 2.1rem;
  font-size: 1.1rem;
  font-weight: bold;
  cursor: pointer;
  letter-spacing: 1px;
  transition: background 0.2s;
  box-shadow: 0 1.5px 6px rgba(10,40,86,0.08);
}
.btn:focus, .btn:hover { background: var(--gb-accent);}
.btn.secondary {
  background: #f1f5f9;
  color: var(--gb-blue);
  border: 1.2px solid #bcd2ee;
}
label {
  display: block;
  margin-bottom: 0.35rem;
  color: #21316d;
  font-weight: 600;
}
input, select, textarea {
  border: 1px solid #c2d2e4;
  border-radius: 10px;
  padding: 0.7rem;
  font-size: 1rem;
  margin-bottom: 1.07rem;
  width: 100%;
  background: var(--gb-gray);
  color: var(--gb-blue);
  box-sizing: border-box;
}
input[type="date"], input[type="time"] {
  color: #0a2856;
  font-size: 1.05rem;
}
.receipt-list {
  background: #e9f1fc;
  border-radius: 12px;
  margin-bottom: 1rem;
  padding: 1rem;
}
.receipt-list ul {
  list-style: none;
  margin: 0;
  padding: 0;
}
.receipt-list li {
  padding: 0.7rem 0;
  border-bottom: 1px solid #b2b2b2;
  cursor: pointer;
  color: #0a2856;
  font-weight: 500;
}
.receipt-list li:last-child { border-bottom: none; }
.terms {
  margin: 1rem 0;
  font-size: 0.96rem;
  color: #21316d;
  background: #f1f5f9;
  padding: 1rem;
  border-radius: 12px;
}
.info-video {
  display: block;
  font-size: 0.97rem;
  color: #1372dc;
  margin-bottom: 1rem;
}
.center { text-align: center; }
.final {
  color: var(--gb-blue);
  font-size: 1.27rem;
  font-weight: 600;
  text-align: center;
  padding: 2rem 0;
}
.address-block input { margin-bottom: 0.5rem;}
@media (max-width: 600px) {
  #progress-steps {font-size:.78rem;}
  section { padding: 0.8rem;}
  .button-row { flex-direction: column; gap: 0.47rem;}
}

.language-picker-wheel {
  width: 100%;
  margin: 1.3rem 0 2.5rem 0;
  background: #fff;
  border-radius: 13px;
  border: 1.5px solid #bcd2ee;
  box-shadow: 0 1.5px 12px rgba(10,40,86,0.06);
  height: 110px;
  overflow: hidden;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
}
.language-picker-list {
  margin: 0;
  padding: 0;
  width: 100%;
  list-style: none;
  text-align: center;
}
.language-picker-list li {
  font-size: 1.19rem;
  color: #0a2856;
  padding: .2rem 0;
  transition: color 0.18s, font-weight 0.18s;
  cursor: pointer;
  line-height: 2.1;
}
.language-picker-list .selected {
  color: var(--gb-accent);
  font-weight: bold;
  font-size: 1.33rem;
  background: #f2f8fb;
  border-radius: 12px;
  transition: color 0.18s, font-size 0.18s, background 0.17s;
}
.language-picker-wheel::before,
.language-picker-wheel::after {
  content: '';
  position: absolute;
  left: 0; right: 0; z-index: 1;
  height: 28px;
  pointer-events: none;
}
.language-picker-wheel::before {
  top: 0; 
  background: linear-gradient(to bottom, #fff 60%, #fff0 .99);
}
.language-picker-wheel::after {
  bottom: 0;
  background: linear-gradient(to top, #fff 60%, #fff0 .99);
}
  </style>
</head>
<body>
  <header>
    <h1>Tax Free Transaction Issuing Flow</h1>
    <small>Global Blue Kiosk Prototype</small>
  </header>
  <div id="progress-steps"></div>

<!-- LANGUAGE SELECTOR - BARREL/WHEEL STYLE (Step 1) -->
<section id="step1" class="active">
  <h2>Step 1: Choose Your Language</h2>
  <div style="padding-bottom:0.7rem;">Select your preferred language to begin:</div>
  <div class="language-picker-wheel" id="langpicker">
    <ul class="language-picker-list" id="langlist">
      <li class="selected">English</li>
      <li>Français</li>
      <li>Deutsch</li>
      <li>Español</li>
      <li>Italiano</li>
      <li>简体中文</li>
      <li>日本語</li>
      <li>한국어</li>
    </ul>
  </div>
  <div class="button-row center">
    <button class="btn" onclick="nextStep()">Next</button>
  </div>
</section>

<!-- ELIGIBILITY AND DOCUMENTS -->
<section id="step2">
  <h2>Step 2: Eligibility & Required Documents</h2>
  <div class="eligibility">
    <strong>Please ensure you have these documents:</strong><br>
    • Passport or ID<br>
    • Sales receipts<br>
    • Credit card or eWallet<br><br>
    <strong>Eligibility:</strong><br>
    • You must be 16 years old or older<br>
    • You must NOT be a European Union resident<br>
    • You must get Customs validation within 3 months + the month of issuing
  </div>
  <div class="button-row">
    <button class="btn" onclick="nextStep()">Next</button>
  </div>
</section>

<!-- PASSPORT SCAN -->
<section id="step3">
  <h2>Step 3: Scan Your Passport/ID</h2>
  <div class="info-video">[Instruction Video: How to scan your passport]</div>
  <label for="passportInput">Passport / ID Number</label>
  <input type="text" id="passportInput" name="passport" placeholder="Enter or scan passport/ID">
  <div class="button-row">
    <button class="btn" onclick="nextStep()">Next</button>
  </div>
</section>

<!-- PERSONAL INFORMATION -->
<section id="step4">
  <h2>Step 4: Enter Traveler Information</h2>
  <label for="fullName">Full Name</label>
  <input type="text" id="fullName" name="fullName" placeholder="e.g. John Doe">
  <label for="address">Address</label>
  <input type="text" id="address" name="address" placeholder="Your address">
  <label for="passportNum">Passport/ID No.</label>
  <input type="text" id="passportNum" name="passportNum" placeholder="Your passport or ID number">
  <label for="email">Email Address</label>
  <input type="email" id="email" name="email" placeholder="Enter your email">
  <div class="button-row">
    <button class="btn" onclick="nextStep()">Next</button>
  </div>
</section>

<!-- RESIDENCE & DEPARTURE -->
<section id="step5">
  <h2>Step 5: Residence & Departure</h2>
  <label for="residenceCountry">Country of Residence</label>
  <input type="text" id="residenceCountry" name="residenceCountry" placeholder="Country of residence">
  <label for="departureDate">Departure Date</label>
  <input type="date" id="departureDate" name="departureDate">
  <div style="font-size:0.97rem;margin-bottom:1rem;">Please confirm your country of residence. It may differ from your passport country. Enter your departure date for early refund eligibility.</div>
  <div class="button-row">
    <button class="btn" onclick="nextStep()">Next</button>
  </div>
</section>

<!-- MEMBERSHIP OPT-IN -->
<section id="step6">
  <h2>Step 6: Become a Global Blue Member</h2>
  <label for="emailMembership">Email Address</label>
  <input type="email" id="emailMembership" name="emailMembership" placeholder="Enter your email">
  <div class="button-row">
    <button class="btn" onclick="nextStep()">Accept</button>
    <button class="btn secondary" onclick="nextStep()">Skip</button>
  </div>
  <small>If email was previously entered, it's auto-populated. Please review and confirm.</small>
</section>

<!-- SALES RECEIPTS LINK -->
<section id="step7">
  <h2>Step 7: Link Sales Receipts</h2>
  <div class="receipt-list">
    <strong>Linked Receipts:</strong>
    <ul>
      <li onclick="alert('Receipt #001123\nShop: PRINTEMPS\nAmount: €250\nGoods:\n- Dress x1\n- Bag x1\n\nDate: 2026-02-05')">
        Receipt #001123 (PRINTEMPS, €250) 
        <span style="color:#1372dc">(details...)</span>
      </li>
    </ul>
  </div>
  <div class="info-video">[Instruction Video: How to scan your sales receipt]</div>
  <div class="button-row">
    <button class="btn" onclick="nextStep()">Next</button>
  </div>
</section>

<!-- REFUND METHOD -->
<section id="step8">
  <h2>Step 8: Refund Method</h2>
  <p>Please select your refund method:</p>
  <div class="button-row center">
    <button class="btn" onclick="showRefundInstructions('credit')">Credit Card</button>
    <button class="btn" onclick="showRefundInstructions('wallet')">Digital Wallet</button>
    <button class="btn" onclick="showRefundInstructions('cash')">Cash</button>
  </div>
</section>

<!-- REFUND INSTRUCTIONS -->
<section id="step9">
  <h2>Step 9: Refund Instructions</h2>
  <div class="info-video" id="refund-info">
    [Instructions for refund method will appear here.]
  </div>
  <div class="button-row">
    <button class="btn" onclick="nextStep()">Next</button>
  </div>
</section>

<!-- SUMMARY & TERMS -->
<section id="step10">
  <h2>Step 10: Review & Declaration</h2>
  <div class="terms">
    Please review your information.<br>
    <a href="#">Terms & Conditions</a> | <a href="#">Traveler Declaration Text</a>
  </div>
  <div class="button-row">
    <button class="btn" onclick="nextStep()">Accept & Continue</button>
  </div>
</section>

<!-- SHOP ASSISTANT APPROVAL -->
<section id="step11">
  <h2>Step 11: Shop Assistant Approval</h2>
  <p>If inconsistencies are detected, assistance is required. Shop assistant scans QR code below to continue.</p>
  <div class="center" style="margin:20px 0;">
    <div style="display:inline-block;width:80px;height:80px;background:#eee;border:3px solid #bcd2ee;border-radius:8px;text-align:center;line-height:80px;">
      <span style="color:#aaa;">[QR]</span>
    </div>
  </div>
  <div class="button-row center">
    <button class="btn" onclick="nextStep()">Approve</button>
    <button class="btn secondary" onclick="restart()">Reject</button>
  </div>
  <small>Shop assistant scans personal QR code to login for approval.</small>
</section>

<!-- TAX FREE FORM PRINTOUT -->
<section id="step12">
  <h2>Step 12: Tax Free Form</h2>
  <div class="info-video">[Instruction: Collect your Tax Free Form printout]</div>
  <div class="button-row">
    <button class="btn" onclick="nextStep()">Finish</button>
  </div>
</section>

<!-- CUSTOMS REMINDER -->
<section id="step13">
  <h2>Step 13: Customs Validation Reminder</h2>
  <div class="final">
    Don't forget to validate your Tax Free Form at Customs.<br>
    <span>Enjoy the journey!</span>
  </div>
</section>

<script>
// Stepper progress
const STEPS = [
  {label:"Lang", short:"Language"},
  {label:"Docs", short:"Eligibility"},
  {label:"Scan", short:"Passport Scan"},
  {label:"Info", short:"Your Info"},
  {label:"Res.", short:"Residence"},
  {label:"Memb.", short:"Membership"},
  {label:"Receipts", short:"Receipts"},
  {label:"Refund", short:"Refund"},
  {label:"Instr.", short:"Instructions"},
  {label:"Summary", short:"Summary"},
  {label:"Assist", short:"Approval"},
  {label:"Print", short:"Print Form"},
  {label:"Customs", short:"Customs"}
];
let currStep = 0;

function updateStepper(idx) {
  const $p = document.getElementById('progress-steps');
  let html = '';
  for(let i=0; i<STEPS.length; ++i) {
    let cls = 'progress-step';
    if(i === idx) cls += ' active';
    if(i < idx) cls += ' done';
    html += `<div class="${cls}"><div class="progress-circle">${i+1}</div>
    <div class="progress-label">${STEPS[i].label}</div>`;
    if (i < STEPS.length-1) html += `<div class="progress-bar"></div>`;
    html += `</div>`;
  }
  $p.innerHTML = html;
}
function showStep(idx) {
  // Hide all
  for(const step of STEPS.map((s, i)=>document.getElementById('step'+(i+1))))
    if(step) step.classList.remove('active');
  // Show current
  const now = document.getElementById('step'+(idx+1));
  if(now) now.classList.add('active');
  updateStepper(idx);
  currStep = idx;
}
function nextStep() {
  if (currStep < STEPS.length-1) showStep(currStep+1);
}
function restart() { showStep(0);}
function showRefundInstructions(method) {
  showStep(8);
  let el = document.getElementById("refund-info");
  if(method==='credit') el.textContent = "Instructions for Credit Card refund: please insert or scan your card.";
  else if(method==='wallet') el.textContent = "Instructions for Alipay/Digital Wallet refund: present your wallet QR code.";
  else if(method==='cash') el.textContent = "Instructions for Cash refund: collect your refund at the counter.";
}
// Apple-style wheel language picker
const langs = ["English","Français","Deutsch","Español","Italiano","简体中文","日本語","한국어"];
let langSelected = 0;
const renderWheel = ()=>{
  let ul = document.getElementById("langlist");
  ul.innerHTML = langs.map((l,i)=>
    `<li class="${i===langSelected?'selected':''}" onclick="setLang(${i})">${l}</li>`
  ).join('');
  ul.scrollTo({
    top: Math.max(0,(langSelected-2)*38),
    behavior: 'smooth'
  });
};
function setLang(i) {
  langSelected = i;
  renderWheel();
}
document.addEventListener("DOMContentLoaded", ()=>{
  renderWheel();
  showStep(0);
  // Language wheel: drag/scroll events for native feel
  let dragging = false, startY=0, lastY=0, lastSelected=0;
  const ul = document.getElementById("langlist");
  ul.addEventListener('mousedown', (e)=>{
    dragging = true; startY = e.clientY; lastY = startY; lastSelected = langSelected;
    e.preventDefault();
  });
  ul.addEventListener('touchstart', (e)=>{
    dragging = true; startY = e.touches[0].clientY; lastY = startY; lastSelected = langSelected;
  });
  document.addEventListener('mousemove', (e)=>{
    if(!dragging) return;
    let dy = e.clientY - lastY;
    if(Math.abs(dy) > 18) {
      let dir = dy < 0 ? 1 : -1;
      langSelected = Math.min(langs.length-1, Math.max(0, langSelected+dir));
      renderWheel(); lastY = e.clientY;
    }
  });
  document.addEventListener('touchmove', (e)=>{
    if(!dragging) return;
    let dy = e.touches[0].clientY - lastY;
    if(Math.abs(dy) > 18) {
      let dir = dy < 0 ? 1 : -1;
      langSelected = Math.min(langs.length-1, Math.max(0, langSelected+dir));
      renderWheel(); lastY = e.touches[0].clientY;
    }
  });
  document.addEventListener('mouseup', ()=>dragging=false);
  document.addEventListener('touchend', ()=>dragging=false);
});
</script>
</body>
</html>
