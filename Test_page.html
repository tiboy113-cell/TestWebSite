<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Local Grey Kiosk (UI, BG Blue, Responsive, QR, Video)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <script src="https://unpkg.com/html5-qrcode"></script>
  <style>
    :root {
      --blue: #0063b0; /* Match the next button and BG in your screenshot */
      --header-grey: #5a5d64;
      --selector-bg: #f2f2f3;
    }
    html, body {
      background: var(--blue);
      min-height: 100vh;
      margin: 0;
    }
    body {
      font-family: "SF Pro Display", Arial, sans-serif;
      color: #222a32;
      min-height: 100vh;
      box-sizing: border-box;
    }
    .outer-container {
      min-height: 100vh;
      width: 100vw;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 40px 0 0 0;
      background: var(--blue);
    }
    .main-card {
      background: #fff;
      border-radius: 36px;
      max-width: 900px;
      width: 100%;
      min-height: 520px;
      display: flex;
      flex-direction: column;
      box-shadow: 0 8px 40px #0054a622;
      position: relative;
      margin: 0 10px 30px 10px;
      overflow: hidden;
    }
    .header-bar {
      background: var(--header-grey);
      padding: 36px 0 28px 0;
      text-align: center;
      border-radius: 36px 36px 0 0;
      font-size: 2.2rem;
      font-weight: bold;
      color: #fff;
      letter-spacing: .02em;
    }
    .form-area {
      flex: 1 1 auto;
      padding: 58px 62px 52px 62px;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      background: #fff;
    }
    @media (max-width:900px) {
      .main-card { max-width: 99vw; }
      .form-area { padding: 36px 14px 28px 14px; }
      .header-bar { font-size: 2rem; }
    }
    @media (max-width:540px) {
      .main-card, .form-area, .header-bar { border-radius: 0; }
      .form-area { padding: 10vw 3vw 10vw 3vw; }
    }
    label, .form-area label {
      font-weight: bold;
      color: var(--blue);
      margin: 0 0 8px 0;
      display: block;
      font-size: 1.07em;
    }
    .card {
      background: #e6f0fa;
      border-radius: 18px;
      padding: 18px 19px 14px 20px;
      margin: 0 0 30px 0;
      font-size: 1.09rem;
      box-shadow: 0 2px 11px #0054a613;
    }
    .btn-main {
      margin-top: 56px;
      margin-bottom: 23px;
      background: var(--blue);
      color: #fff;
      border: none;
      width: 100%;
      padding: 26px 10px;
      font-size: 2rem;
      font-weight: bold;
      border-radius: 28px;
      box-shadow: 0 2px 18px #00336623;
      cursor: pointer;
      transition: background .14s,box-shadow.17s;
      letter-spacing: 0.03em;
      position: relative;
      z-index: 1;
    }
    .btn-main:active { background: #00549c;}
    .selector-group {
      background: #f1f2f7;
      border: 1.5px solid #c3c6cc;
      border-radius: 18px;
      padding: 0;
      min-height: 65px;
      display: flex;
      align-items: center;
      margin-bottom: 32px;
      transition: border-color .15s;
      box-sizing: border-box;
    }
    .lang-picker-text, .date-picker-text {
      flex:1;
      font-size: 1.25em;
      color: #242a3d;
      font-weight: bold;
      padding: 20px 16px 20px 21px;
      border: none;
      background: transparent;
      outline: none;
      user-select: none;
      text-align: left;
      letter-spacing:0.01em;
    }
    .lang-arrow, .date-arrow {
      font-size: 2rem;
      color: #0859a5;
      margin-right: 13px;
      user-select: none;
      pointer-events: none;
    }
    .selector-group:focus-within, .selector-group.active {
      border-color: var(--blue);
      background: #eef4fe;
    }
    .form-group {width:100%;margin-bottom:25px;}
    input, select, textarea {width: 100%;font-size:1.17em;min-width:0;box-sizing:border-box;border-radius:14px;border:1.5px solid #b8c7da;padding:16px 18px;background-color:#fafbfc;}
    /* Video full width below header, above continue btn */
    .form-area video {
      display: block;
      width: 100%;
      height: auto;
      min-width: 0;
      margin: 0 0 27px 0;
      border-radius: 18px;
      box-sizing: border-box;
      background: #f2f5fa;
      outline:none;
    }
    .receipt-list {
      background: #f4f6f9;
      border-radius: 17px;
      padding: 14px 10px 8px 10px;
      margin-bottom: 17px;
    }
    .receipt {
      background: #fff;
      border-radius: 13px;
      box-shadow: 0 1px 6px #0054A622;
      padding: 11px 18px;
      margin-bottom: 12px;
      display:flex;justify-content:space-between; align-items:center;font-size:1.09rem;
    }
    .show-more-receipts {
      color: var(--blue);
      background:transparent;
      border:none;
      font-weight:600;
      font-size:1.13rem;
      text-align:left;
      margin:10px 0 0 0;
      cursor:pointer;
      width:100%;
      padding:8px 0 17px 7px;
    }
    /* Modal overlays - always on top, centered */
    .modal-bg,.overlay {background:rgba(0,50,140,.13);position:fixed;top:0;left:0;right:0;bottom:0;z-index: 10010;}
    .popup,.modal,.picker-modal,.qr-modal,.date-modal {
      position:fixed;z-index:10020;left:50%;top:50%;transform:translate(-50%,-50%);
      background:#fff;border-radius:18px;box-shadow:0 6px 38px #0054A661;
      padding:36px 29px 34px 29px;max-width:99vw;min-width:300px;
      min-height:120px;
    }
    #reader>video, .qr-modal video { border-radius: 14px !important;}
    .qr-close {background:var(--blue);color:#fff;border:none;border-radius:9px;font-size:1.20em;font-weight:700;padding:12px 37px;margin-top:18px;cursor:pointer;margin-bottom:0;}
    .qr-close:hover {background:#003366;}
  </style>
</head>
<body>
  <div class="outer-container">
    <div class="main-card">
      <div class="header-bar">Local Grey</div>
      <div class="form-area" id="ui-content">
        <!-- JavaScript will populate actual form steps here -->
      </div>
    </div>
  </div>
  <div id="modalBg" class="modal-bg" style="display:none"></div>
  <script>
/* --- Demo Data/State and Renderer Setup --- */
const workflow = [
  {
    render: (state)=>`
      <label>Select your language</label>
      <div class="selector-group" tabindex="0" id="langPickerBtn">
        <span class="lang-picker-text">${state.language}</span>
        <span class="lang-arrow">&#9662;</span>
      </div>
      <button class="btn-main" id="langNextBtn">Next</button>`,
    after: (state)=>{
      document.getElementById('langPickerBtn').onclick = ()=>{
        showPickerModal(state.language,v=>{ state.language=v; renderStep(); });
      };
      document.getElementById('langNextBtn').onclick=()=>{
        activeStep++;
        renderStep();
      }
    }
  },
  {
    render: ()=>`
      <h2>Have your documents ready</h2>
      <div class="card">
        <ul>
          <li>Passport or ID</li>
          <li>Sales Receipts</li>
          <li>Credit Card or eWallet</li>
        </ul>
        <span class="elig">Eligibility:</span>
        <ul>
          <li>16 years old or older</li>
          <li>Not a European Union resident</li>
          <li>Get Customs validation within 3 months of issuance</li>
        </ul>
      </div>
      <button class="btn-main" id="docNextBtn">Next</button>`,
    after: ()=>document.getElementById('docNextBtn').onclick=()=>{activeStep++;renderStep();}
  },
  {
    render: (state)=>`
      <h2>Passport/ID Scanning</h2>
      <video id="passportVideo" controls autoplay playsinline muted poster="https://dummyimage.com/900x290/cccccc/222222&text=Passport+Scan">
        <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4"/>
      </video>
      <div class="input-label" style="margin-top:18px;">Type your Passport or ID number</div>
      <input class="input" id="passportInput" type="text" placeholder="Passport or ID Number" value="${state.passport || ''}" autocomplete="off"/>
      <button type="button" id="qrbtn" class="btn-secondary">Scan QR code</button>
      <button class="btn-main" id="passportNextBtn">Continue</button>`,
    after: (state)=>{
      document.getElementById('passportNextBtn').onclick = () => {
        state.passport = document.getElementById('passportInput').value.trim();
        state.traveler = {...state.traveler, passport: state.passport};
        activeStep++; renderStep();
      };
      document.getElementById('qrbtn').onclick = function(){
        showQrModal(code=>{
          state.passport = code;
          state.qrData = code;
          renderStep();
          setTimeout(()=>{document.getElementById('passportInput').value=state.passport;},80);
        });
      };
      // Play on user interaction
      setTimeout(()=>{try{document.getElementById('passportVideo').play();}catch(e){}},300);
    }
  },
  // ...add other steps as in your full flow, similar to above...
];

// Language modal: fully native looking
const languages = ["English","Mandarin","Hindi","Spanish","French","Arabic","Bengali","Russian","Portuguese","Urdu",
  "Indonesian","German","Japanese","Swahili","Marathi","Telugu","Turkish","Korean","Vietnamese","Italian"];
function showPickerModal(curr, cb) {
  const modalBg = document.getElementById('modalBg'); modalBg.style.display="block";
  let idx = languages.indexOf(curr); if(idx<0)idx=0;
  const modal = document.createElement('div');
  modal.className='picker-modal';
  modal.innerHTML = `<h3 style="margin-bottom:18px;">Select your language</h3>
    <div style="height:200px;overflow-y:scroll;">
    ${languages.map((lang,i)=>`<div style="padding:15px;font-size:1.17em;border-radius:9px;margin:2px 0;cursor:pointer;background:${i==idx?'#eef6ff':'#fff'};color:${i==idx?'#065ca1':'#233'};" data-i="${i}">${lang}</div>`).join('')}
    </div>
    <button class="btn-main" style="margin-top:18px;margin-bottom:3px;font-size:1.1em;" id="pickLangBtn">OK</button>`;
  document.body.appendChild(modal);
  let picked = idx;
  Array.from(modal.querySelectorAll('[data-i]')).forEach(el=>{
    el.onclick=e=>{
      picked=+el.dataset.i;
      Array.from(modal.querySelectorAll('[data-i]')).forEach(o=>o.style.background='#fff');
      el.style.background='#eef6ff';
    }
  });
  modal.querySelector('#pickLangBtn').onclick = ()=>{cb(languages[picked]); cls();}
  function cls(){document.body.removeChild(modal);modalBg.style.display="none";}
  modalBg.onclick=cls;
}
function showQrModal(onScan) {
  if(window.qrScannerActive)return;window.qrScannerActive=true;
  const modalBg=document.getElementById("modalBg");modalBg.style.display="block";
  let qrdiv = document.createElement("div");
  qrdiv.className = "qr-modal";
  qrdiv.innerHTML = `<div id="reader" style="width:99vw;max-width:320px"></div><button class="qr-close" id="qrCloseBtn">Close</button>`;
  document.body.appendChild(qrdiv);
  let qr=new Html5Qrcode("reader");
  qr.start({facingMode:"environment"},{fps:10,qrbox:220},code=>{
    onScan(code);
    qr.stop();
    document.body.removeChild(qrdiv);
    modalBg.style.display="none";
  },()=>{});
  document.getElementById('qrCloseBtn').onclick=()=>{qr.stop();document.body.removeChild(qrdiv);modalBg.style.display="none";}
  modalBg.onclick=()=>{qr.stop();document.body.removeChild(qrdiv);modalBg.style.display="none";}
}
let activeStep = 0;
function renderStep() {
  const stateClone = {...state};
  document.getElementById("ui-content").innerHTML = workflow[activeStep].render(stateClone);
  workflow[activeStep].after(stateClone);
}
renderStep();
  </script>
</body>
</html>
